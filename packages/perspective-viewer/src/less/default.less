/******************************************************************************
 *
 * Copyright (c) 2017, the Perspective Authors.
 *
 * This file is part of the Perspective library, distributed under the terms of
 * the Apache License 2.0.  The full license can be found in the LICENSE file.
 *
 */

@import "variables";

.psp-text-field {
    position: relative;
    background-color: white;
    border-bottom: 1px solid @border-color;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    min-height: 24px;
}

.dragging .psp-text-field.dropping {
    border-bottom: 2px solid #22a0ce;
}

.dragging .psp-text-field {
    border-bottom: 1px solid #22a0ce;
}

.psp-text-field > .psp-text-field__input {
    border: 0px;
    line-height: 20px;
    vertical-align: bottom;
    padding-bottom: 0px;
    display: none;
}

.psp-text-field__input + label {
    line-height: 17px;
    box-sizing: border-box;
    color: rgb(204, 204, 204);
    font-weight: 400;
    white-space: nowrap;
    padding: 0px 0px 2px 10px;
    font-size: 12px;
    display: inline-block;
}

.dropping .psp-text-field__input,
.psp-text-field__input:not(:empty) {
    display: block;
}

.dropping .psp-text-field__input::after {
    content: "|";
    width: 0px;
    overflow: visible;
    margin-top: -2px;
}

.dropping * {
    pointer-events: none;
}

.dropping .psp-text-field label,
.psp-text-field__input:not(:empty) + label {
    position: absolute;
    top: 0px;
    line-height: 10px;
    font-size: 10px;
    display: none;
}

.selected_indicator() {
    font-family: Arial;
    font-weight: 500;
}

.bordered() {
    border: 1px solid @border-color;
    border-top-width: 0px;
    border-left-width: 0px;
    border-right-width: 0px;
}

.dropping perspective-row.inserting {
    border-top: 25px solid rgba(0, 0, 0, 0);
}

.dropping perspective-row.postserting {
    border-bottom: 25px solid rgba(0, 0, 0, 0);
}

perspective-viewer {
    font-family: @sans-serif-fonts;

    .awesomplete > ul {
        border-radius: 0px;
        margin: 0px;
        border: none;
        transform-origin: none;
        transition: 0;
    }

    .awesomplete > ul:before {
        content: none;
    }

    .awesomplete > input {
        background-color: transparent;
    }

    perspective-row #psp_row {
        color: rgb(51, 51, 51);
    }

    #side_panel perspective-row .row_draggable {
        padding-right: 10px;
        color: rgb(51, 51, 51);
        transition: height 0.2s;
    }

    #app.columns_horizontal {
        #columns_container {
            flex-direction: row-reverse;
        }

        #active_columns,
        #inactive_columns {
            display: flex;
            flex-direction: column;
            flex: 0 1 auto;
            width: 100%;
        }

        #sub_columns {
            flex-shrink: 1;

            perspective-row {
                span#name {
                    margin-right: 25px;
                }
            }
        }

        #active_columns {
            margin-right: 8px;

            perspective-row {
                div#psp_row {
                    margin-right: 2px;
                }
            }
        }

        #side_panel #divider {
            display: none;
        }

        perspective-computed-column {
            max-height: none;
        }
    }

    #columns_container {
        flex-direction: column;
        height: calc(~"100% - 29px");

        #active_columns {
            flex: 0 1 auto;
        }

        #active_columns,
        #inactive_columns {
            border: none !important;
        }

        #active_columns perspective-row .row_draggable {
            .bordered();
            background-color: white;
            overflow: hidden;
        }

        #active_columns perspective-row[drop-target] {
            .row_draggable {
                background-color: rgb(240, 240, 255) !important;
                border: 1px solid #1078d1 !important;
            }
        }

        #inactive_columns perspective-row .is_visible::before {
            content: "\25CB";
        }
    }

    #side_panel perspective-row .is_visible {
        color: #999;
    }

    #side_panel perspective-row [settings="true"] #app {
        border-top: 1px solid #ccc;
    }

    ul {
        transition: background-color 0.2s, border-color 0.2s;
    }

    #filters perspective-row {
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: transparent;
        }
    }

    #sort perspective-row #sort_order {
        display: inline-block;
    }

    .column_row() {
        font-family: monospace;
    }

    perspective-row {
        border: 0px solid rgba(0, 0, 0, 0);

        #row_close {
            color: #999;
            font-family: Arial;
            font-size: 10px;
        }

        #column_aggregate {
            font-family: Arial;
        }

        .row_draggable select {
            border: none;
        }

        .row_draggable select:focus {
            outline: none;
        }
    }

    #side_panel perspective-row {
        .is_visible::before {
            content: "\25CF";
        }

        .integer::before,
        .float::before {
            .column_row();
            content: "123";
            color: #016bc6;
        }

        .string::before {
            .column_row();
            content: "abc";
            color: #fe9292;
        }

        .boolean::before {
            .column_row();
            content: "t/f";
            color: #999999;
        }

        .datetime::before {
            .column_row();
            content: "mdy";
            color: #999999;
        }

        .date::before {
            .column_row();
            content: "mdy";
            color: #999999;
        }
    }

    #side_panel #side_panel__actions {
        display: flex;
        flex-direction: column;
        flex-shrink: 1000;
        justify-content: flex-start;
        padding: 5px;
        position: relative;
        overflow-y: auto;
        width: 100%;
        margin-top: 36px;
        min-height: 36px;

        button.side_panel-action {
            align-items: center;
            align-content: center;
            background: none;
            border: none;
            display: flex;
            flex-direction: row;
            font-family: @sans-serif-fonts !important;
            font-size: 12px;
            padding-right: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;

            span {
                margin-left: 5px;
                font-size: 15px;
            }

            &:hover {
                cursor: pointer;
            }
        }
    }

    .noselect {
        -webkit-touch-callout: none;
        /* iOS Safari */
        -webkit-user-select: none;
        /* Safari */
        -khtml-user-select: none;
        /* Konqueror HTML */
        -moz-user-select: none;
        /* Firefox */
        -ms-user-select: none;
        /* Internet Explorer/Edge */
        user-select: none;
        /* Non-prefixed version, currently supported by Chrome and Opera */
    }

    svg text {
        font-family: @sans-serif-fonts !important;
    }

    svg .highcharts-axis-title,
    svg .highcharts-axis-title {
        font-family: @sans-serif-fonts !important;
    }

    svg .highcharts-legend-box {
        fill: none;
    }

    #pivot_chart {
        background-color: white;
    }

    #divider {
        min-height: 2px;
        height: 2px;
        margin: 15px 13px 15px 13px;
        margin-bottom: 5px;
    }

    #drop_target {
        background: white;
    }

    #drop_target_inner h3 {
        color: #aaa;
        font-weight: 300;
    }

    #config_button {
        font-weight: normal;
        font-family: Arial;
        font-size: 16px;
        color: #999;
        transition: opacity 0.3s;
    }

    #config_button:before {
        content: "\1f527";
    }

    ul {
        .bordered();
        font-size: 12px;
        padding: 0px 10px 0px 10px;
    }

    select {
        border-radius: 0;
        background-color: white;
        .bordered();
    }

    select:focus {
        outline: none;
    }

    input {
        .bordered();
    }

    input::placeholder {
        color: #ccc;
    }

    rect,
    svg image {
        opacity: 0.5;
    }

    path,
    circle {
        opacity: 0.8;
    }

    option[value=""] {
        color: white !important;
    }

    select:focus {
        color: #000 !important;
    }

    #app {
        background-color: #eee;
    }

    perspective-hypergrid {
        color: #666;
    }

    ::-webkit-scrollbar,
    ::shadow ::-webkit-scrollbar {
        width: 12px;
    }

    ::-webkit-scrollbar-thumb,
    ::shadow ::-webkit-scrollbar-thumb {
        background: #ccc;
    }

    ::-webkit-scrollbar-track,
    ::shadow ::-webkit-scrollbar-track {
        background: none;
    }
}
