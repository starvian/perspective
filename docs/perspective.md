<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [make_table][1]
-   [view][2]
    -   [delete][3]
    -   [schema][4]
    -   [to_columns][5]
    -   [to_json][6]
    -   [to_csv][7]
    -   [col_to_js_typed_array][8]
    -   [to_arrow][9]
    -   [num_rows][10]
    -   [num_columns][11]
    -   [get_row_expanded][12]
    -   [expand][13]
    -   [collapse][14]
    -   [set_depth][15]
    -   [on_update][16]
    -   [on_delete][17]
-   [table][18]
    -   [clear][19]
    -   [replace][20]
    -   [delete][21]
    -   [on_delete][22]
    -   [size][23]
    -   [schema][24]
    -   [computed_schema][25]
    -   [is_valid_filter][26]
    -   [view][27]
    -   [update][28]
    -   [remove][29]
    -   [add_computed][30]
    -   [columns][31]
    -   [column_metadata][32]
-   [table][33]

## make_table

Common logic for creating and registering a gnode/t_table.

**Parameters**

-   `accessor`  
-   `pool` **any** 
-   `gnode` **any** 
-   `computed` **any** 
-   `index` **any** 
-   `limit` **any** 
-   `limit_index` **any** 
-   `is_update`  
-   `is_delete` **any** 
-   `is_arrow`  
-   `pdata` **any** 

## view

A View object represents a specific transform (configuration or pivot,
filter, sort, etc) configuration on an underlying [table][18]. A View
receives all updates from the [table][18] from which it is derived, and
can be serialized to JSON or trigger a callback when it is updated.  View
objects are immutable, and will remain in memory and actively process
updates until its [view#delete][34] method is called.

<strong>Note</strong> This constructor is not public - Views are created
by invoking the [table#view][35] method.

**Examples**

```javascript
// Returns a new View, pivoted in the row space by the "name" column.
table.view({row_pivots: ["name"]});
```

### delete

Delete this [view][2] and clean up all resources associated with it.
View objects do not stop consuming resources or processing updates when
they are garbage collected - you must call this method to reclaim these.

### schema

The schema of this [view][2]. A schema is an Object, the keys of which
are the columns of this [view][2], and the values are their string type names.
If this [view][2] is aggregated, theses will be the aggregated types;
otherwise these types will be the same as the columns in the underlying
[table][18]

Returns **[Promise][36]&lt;[Object][37]>** A Promise of this [view][2]'s schema.

### to_columns

Serializes this view to JSON data in a column-oriented format.

**Parameters**

-   `options` **[Object][37]?** An optional configuration object.
    -   `options.start_row` **[number][38]** The starting row index from which
        to serialize.
    -   `options.end_row` **[number][38]** The ending row index from which
        to serialize.
    -   `options.start_col` **[number][38]** The starting column index from which
        to serialize.
    -   `options.end_col` **[number][38]** The ending column index from which
        to serialize.

Returns **[Promise][36]&lt;[Array][39]>** A Promise resolving to An array of Objects
representing the rows of this [view][2].  If this [view][2] had a
"row_pivots" config parameter supplied when constructed, each row Object
will have a "**ROW_PATH**" key, whose value specifies this row's
aggregated path.  If this [view][2] had a "column_pivots" config
parameter supplied, the keys of this object will be comma-prepended with
their comma-separated column paths.

### to_json

Serializes this view to JSON data in a row-oriented format.

**Parameters**

-   `options` **[Object][37]?** An optional configuration object.
    -   `options.start_row` **[number][38]** The starting row index from which
        to serialize.
    -   `options.end_row` **[number][38]** The ending row index from which
        to serialize.
    -   `options.start_col` **[number][38]** The starting column index from which
        to serialize.
    -   `options.end_col` **[number][38]** The ending column index from which
        to serialize.

Returns **[Promise][36]&lt;[Array][39]>** A Promise resolving to An array of Objects
representing the rows of this [view][2].  If this [view][2] had a
"row_pivots" config parameter supplied when constructed, each row Object
will have a "**ROW_PATH**" key, whose value specifies this row's
aggregated path.  If this [view][2] had a "column_pivots" config
parameter supplied, the keys of this object will be comma-prepended with
their comma-separated column paths.

### to_csv

Serializes this view to CSV data in a standard format.

**Parameters**

-   `options` **[Object][37]?** An optional configuration object.
    -   `options.start_row` **[number][38]** The starting row index from which
        to serialize.
    -   `options.end_row` **[number][38]** The ending row index from which
        to serialize.
    -   `options.start_col` **[number][38]** The starting column index from which
        to serialize.
    -   `options.end_col` **[number][38]** The ending column index from which
        to serialize.
    -   `options.config` **[Object][37]** A config object for the Papaparse [https://www.papaparse.com/docs#json-to-csv][40]
        config object.

Returns **[Promise][36]&lt;[string][41]>** A Promise resolving to a string in CSV format
representing the rows of this [view][2].  If this [view][2] had a
"row_pivots" config parameter supplied when constructed, each row
will have prepended those values specified by this row's
aggregated path.  If this [view][2] had a "column_pivots" config
parameter supplied, the keys of this object will be comma-prepended with
their comma-separated column paths.

### col_to_js_typed_array

Serializes a view column into a TypedArray.

**Parameters**

-   `col_name`  
-   `column_name` **[string][41]** The name of the column to serialize.

Returns **[Promise][36]&lt;[TypedArray][42]>** A promise resolving to a TypedArray
representing the data of the column as retrieved from the [view][2] - all
pivots, aggregates, sorts, and filters have been applied onto the values
inside the TypedArray. The TypedArray will be constructed based on data type -
integers will resolve to Int8Array, Int16Array, or Int32Array. Floats resolve to
Float32Array or Float64Array. If the column cannot be found, or is not of an
integer/float type, the Promise returns undefined.

### to_arrow

Serializes a view to arrow.

Returns **[Promise][36]&lt;[TypedArray][42]>** A Table in the Apache Arrow format containing
data from the view.

### num_rows

The number of aggregated rows in this [view][2].  This is affected by
the "row_pivots" configuration parameter supplied to this [view][2]'s
contructor.

Returns **[Promise][36]&lt;[number][38]>** The number of aggregated rows.

### num_columns

The number of aggregated columns in this [view][2].  This is affected by
the "column_pivots" configuration parameter supplied to this [view][2]'s
contructor.

Returns **[Promise][36]&lt;[number][38]>** The number of aggregated columns.

### get_row_expanded

Whether this row at index `idx` is in an expanded or collapsed state.

**Parameters**

-   `idx`  

Returns **[Promise][36]&lt;bool>** Whether this row is expanded.

### expand

Expands the row at index `idx`.

**Parameters**

-   `idx`  

Returns **[Promise][36]&lt;void>** 

### collapse

Collapses the row at index `idx`.

**Parameters**

-   `idx`  

Returns **[Promise][36]&lt;void>** 

### set_depth

Set expansion `depth` pf the pivot tree.

**Parameters**

-   `depth`  

### on_update

Register a callback with this [view][2].  Whenever the [view][2]'s
underlying table emits an update, this callback will be invoked with the
aggregated row deltas.

**Parameters**

-   `callback` **[function][43]** A callback function invoked on update.  The
    parameter to this callback shares a structure with the return type of
    [view#to_json][44].

### on_delete

Register a callback with this [view][2].  Whenever the [view][2]
is deleted, this callback will be invoked.

**Parameters**

-   `callback` **[function][43]** A callback function invoked on update.  The
        parameter to this callback shares a structure with the return type of
        [view#to_json][44].

## table

A Table object is the basic data container in Perspective.  Tables are
typed - they have an immutable set of column names, and a known type for
each.

<strong>Note</strong> This constructor is not public - Tables are created
by invoking the [table][18] factory method, either on the perspective
module object, or an a [worker][45] instance.

### clear

Remove all rows in this [table][18] while preserving the schema and
construction options.

### replace

Replace all rows in this [table][18] the input data.

**Parameters**

-   `data`  

### delete

Delete this [table][18] and clean up all resources associated with it.
Table objects do not stop consuming resources or processing updates when
they are garbage collected - you must call this method to reclaim these.

### on_delete

Register a callback with this [table][18].  Whenever the [view][2]
is deleted, this callback will be invoked.

**Parameters**

-   `callback` **[function][43]** A callback function invoked on update.  The
        parameter to this callback shares a structure with the return type of
        [table#to_json][46].

### size

The number of accumulated rows in this [table][18].  This is affected by
the "index" configuration parameter supplied to this [view][2]'s
contructor - as rows will be overwritten when they share an idnex column.

Returns **[Promise][36]&lt;[number][38]>** The number of accumulated rows.

### schema

The schema of this [table][18].  A schema is an Object whose keys are the
columns of this [table][18], and whose values are their string type names.

**Parameters**

-   `computed` **[boolean][47]** Should computed columns be included?
    (default false) (optional, default `false`)

Returns **[Promise][36]&lt;[Object][37]>** A Promise of this [table][18]'s schema.

### computed_schema

The computed schema of this [table][18]. Returns a schema of only computed
columns added by the user, the keys of which are computed columns and the values an
Object containing the associated column_name, column_type, and computation.

Returns **[Promise][36]&lt;[Object][37]>** A Promise of this [table][18]'s computed schema.

### is_valid_filter

Determines whether a given filter is valid.

**Parameters**

-   `filter` **[Array][39]&lt;[string][41]>?** A filter configuration array to test

Returns **[boolean][47]** Whether the filter is valid

### view

Create a new [view][2] from this table with a specified
configuration.

**Parameters**

-   `config` **[Object][37]?** The configuration object for this [view][2].
    -   `config.row_pivot` **[Array][39]&lt;[string][41]>?** An array of column names
        to use as [Row Pivots][48].
    -   `config.column_pivot` **[Array][39]&lt;[string][41]>?** An array of column names
        to use as [Column Pivots][49].
    -   `config.aggregate` **[Array][39]&lt;[Object][37]>?** An Array of Aggregate configuration objects,
        each of which should provide a "column" and "op" property, representing the string
        aggregation type and associated column name, respectively.  Aggregates not provided
        will use their type defaults
    -   `config.filter` **[Array][39]&lt;[Array][39]&lt;[string][41]>>?** An Array of Filter configurations to
        apply.  A filter configuration is an array of 3 elements:  A column name,
        a supported filter comparison string (e.g. '===', '>'), and a value to compare.
    -   `config.sort` **[Array][39]&lt;[string][41]>?** An Array of Sort configurations to apply.
        A sort configuration is an array of 2 elements: A column name, and a sort direction,
        which are: "none", "asc", "desc", "col asc", "col desc", "asc abs", "desc abs", "col asc abs", "col desc abs".

**Examples**

```javascript
var view = table.view({
     row_pivot: ['region'],
     aggregate: [{op: 'dominant', column:'region'}],
     filter: [['client', 'contains', 'fred']],
     sort: [['value', 'asc']]
});
```

Returns **[view][50]** A new [view][2] object for the supplied configuration,
bound to this table

### update

-   **See: [table][18]**

Updates the rows of a [table][18]. Updated rows are pushed down to any
derived [view][2] objects.

**Parameters**

-   `data` **([Object][37]&lt;[string][41], [Array][39]> | [Array][39]&lt;[Object][37]> | [string][41])** The input data
    for this table.  The supported input types mirror the constructor options, minus
    the ability to pass a schema (Object&lt;string, string>) as this table has
    already been constructed, thus its types are set in stone.

### remove

-   **See: [table][18]**

Removes the rows of a [table][18]. Removed rows are pushed down to any
derived [view][2] objects.

**Parameters**

-   `data` **[Array][39]&lt;[Object][37]>** An array of primary keys to remove.

### add_computed

Create a new table with the addition of new computed columns (defined as javascript functions)

**Parameters**

-   `computed` **Computation** A computation specification object

### columns

The column names of this table.

**Parameters**

-   `computed` **[boolean][47]** Should computed columns be included?
    (default false) (optional, default `false`)

Returns **[Array][39]&lt;[string][41]>** An array of column names for this table.

### column_metadata

Column metadata for this table.

If the column is computed, the `computed` property is an Object containing:

-   Array `input_columns`
-   String `input_type`
-   Object `computation`.

    Otherwise, `computed` is `undefined`.

Returns **[Array][39]&lt;[object][37]>** An array of Objects containing metadata for each column.

## table

A factory method for constructing [table][18]s.

**Parameters**

-   `data` **([Object][37]&lt;[string][41], [Array][39]> | [Object][37]&lt;[string][41], [string][41]> | [Array][39]&lt;[Object][37]> | [string][41])** The input data
        for this table.  When supplied an Object with string values, an empty
        table is returned using this Object as a schema.  When an Object with
        Array values is supplied, a table is returned using this object's
        key/value pairs as name/columns respectively.  When an Array is supplied,
        a table is constructed using this Array's objects as rows.  When
        a string is supplied, the parameter as parsed as a CSV.
-   `options` **[Object][37]?** An optional options dictionary.
    -   `options.index` **[string][41]** The name of the column in the resulting
            table to treat as an index.  When updating this table, rows sharing an
            index of a new row will be overwritten. `index` is mutually exclusive
            to `limit`
    -   `options.limit` **integer** The maximum number of rows that can be
            added to this table.  When exceeded, old rows will be overwritten in
            the order they were inserted.  `limit` is mutually exclusive to
            `index`.

**Examples**

```javascript
// Creating a table directly from node
var table = perspective.table([{x: 1}, {x: 2}]);
```

```javascript
// Creating a table from a Web Worker (instantiated via the worker() method).
var table = worker.table([{x: 1}, {x: 2}]);
```

Returns **[table][51]** A new [table][18] object.

[1]: #make_table

[2]: #view

[3]: #delete

[4]: #schema

[5]: #to_columns

[6]: #to_json

[7]: #to_csv

[8]: #col_to_js_typed_array

[9]: #to_arrow

[10]: #num_rows

[11]: #num_columns

[12]: #get_row_expanded

[13]: #expand

[14]: #collapse

[15]: #set_depth

[16]: #on_update

[17]: #on_delete

[18]: #table

[19]: #clear

[20]: #replace

[21]: #delete-1

[22]: #on_delete-1

[23]: #size

[24]: #schema-1

[25]: #computed_schema

[26]: #is_valid_filter

[27]: #view-1

[28]: #update

[29]: #remove

[30]: #add_computed

[31]: #columns

[32]: #column_metadata

[33]: #table-1

[34]: #viewdelete

[35]: #tableview

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[40]: https://www.papaparse.com/docs#json-to-csv

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[42]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypedArray

[43]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[44]: #viewto_json

[45]: https://developer.mozilla.org/docs/Web/JavaScript

[46]: table#to_json

[47]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[48]: https://en.wikipedia.org/wiki/Pivot_table#Row_labels

[49]: https://en.wikipedia.org/wiki/Pivot_table#Column_labels

[50]: #view

[51]: #table
